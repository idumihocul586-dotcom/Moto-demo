<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechnoDrive - Moto Demo</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Анимации из Tailwind config */
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fade-in 0.3s ease-out; }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ЗАМЕНА ИКОНОК (MOCK ICONS) ---
        // Так как мы работаем без сборки, мы создаем простые SVG-заглушки вместо lucide-react
        const IconWrapper = ({ children, className, onClick }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} onClick={onClick} style={{cursor: onClick ? 'pointer' : 'inherit'}}>
                {children}
            </svg>
        );

        const Menu = (p) => <IconWrapper {...p}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></IconWrapper>;
        const X = (p) => <IconWrapper {...p}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconWrapper>;
        const Search = (p) => <IconWrapper {...p}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></IconWrapper>;
        const ShoppingCart = (p) => <IconWrapper {...p}><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></IconWrapper>;
        const ChevronRight = (p) => <IconWrapper {...p}><path d="m9 18 6-6-6-6"/></IconWrapper>;
        const Star = (p) => <IconWrapper {...p}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconWrapper>;
        const Check = (p) => <IconWrapper {...p}><polyline points="20 6 9 17 4 12"/></IconWrapper>;
        
        // Остальные иконки делаем универсальными, чтобы не раздувать код
        const GenericIcon = (p) => <IconWrapper {...p}><circle cx="12" cy="12" r="10"/></IconWrapper>;
        const Phone = GenericIcon;
        const ShieldCheck = GenericIcon;
        const Wrench = GenericIcon;
        const Anchor = GenericIcon;
        const Mountain = GenericIcon;
        const Snowflake = GenericIcon;
        const Flame = GenericIcon;
        const Leaf = GenericIcon;
        const ChevronDown = GenericIcon;
        const ArrowRight = GenericIcon;


        // --- ОСНОВНОЙ КОД ВАШЕГО САЙТА ---

        /* Jony Ive Design Philosophy:
           - Typography: Clean, sans-serif, legible (System fonts).
           - Color: "Safety Orange" (#ff4500) for actions, Dark Slate for structure.
           - Spacing: Breathable, distinct.
           - Interaction: Immediate feedback. */

        // --- MOCK DATA ---
        const PRODUCTS = [
            {
                id: 1,
                category: 'moto',
                name: 'Kayo Basic TT125',
                price: 109000,
                oldPrice: 119900,
                specs: '125 куб.см, 11 л.с., колеса 17/14',
                image: 'https://images.unsplash.com/photo-1558981285-6f0c94958bb6?auto=format&fit=crop&q=80&w=600',
                badges: ['ХИТ', 'ВЫГОДНО'],
                rating: 4.8,
                reviews: 42,
                brand: 'Kayo',
                description: 'Легендарный питбайк для новичков. Электростартер уже в базе. Прощает ошибки управления.',
                features: ['Электростартер + Кикстартер', 'Усиленная рама', 'Фара головного света'],
                analogs: [3]
            },
            {
                id: 2,
                category: 'water',
                name: 'Parsun T 9.9 BMS',
                price: 128000,
                specs: '9.9 (15) л.с., 246 куб.см, 2-тактный',
                image: 'https://images.unsplash.com/photo-1563814674-e354924a49c4?auto=format&fit=crop&q=80&w=600',
                badges: ['ХИТ'],
                rating: 4.9,
                reviews: 156,
                brand: 'Parsun',
                description: 'Полный аналог Yamaha 9.9 GMHS. Раздушивается в 15 л.с. простым снятием ограничителя.',
                features: ['Винт шаг 11"', 'Бак 24 литра', 'Генераторная катушка'],
                analogs: [5]
            },
            {
                id: 3,
                category: 'moto',
                name: 'AODES Pathcross 650L',
                price: 1055000,
                specs: '650 куб.см, 54 л.с., V-twin',
                image: 'https://images.unsplash.com/photo-1570829053985-56e661df1ca2?auto=format&fit=crop&q=80&w=600',
                badges: ['NEW', 'Убийца брендов'],
                rating: 5.0,
                reviews: 12,
                brand: 'AODES',
                description: 'Доступная альтернатива BRP. Мощный V-twin мотор, вариатор CVTech (Канада).',
                features: ['Лебедка в стоке', 'Электроусилитель руля (EPS)', 'Двухместная база'],
                analogs: []
            },
            {
                id: 4,
                category: 'water',
                name: 'Gladiator E380S НДНД',
                price: 68900,
                specs: '380 см, НДНД, 1100 г/м²',
                image: 'https://images.unsplash.com/photo-1544259508-e877478d10b8?auto=format&fit=crop&q=80&w=600',
                badges: ['ВЫГОДНО'],
                rating: 4.7,
                reviews: 89,
                brand: 'Gladiator',
                description: 'Лодка с бронированным дном. Идеальна для каменистых рек и порогов.',
                features: ['Броня по баллонам и килю', 'Кокпит 82 см шириной', 'Стравливающий клапан'],
                analogs: []
            },
            {
                id: 5,
                category: 'water',
                name: 'Hidea 9.8 FHS',
                price: 98000,
                specs: '9.8 л.с., 169 куб.см, 26 кг',
                image: 'https://images.unsplash.com/photo-1621517032777-66b96b345681?auto=format&fit=crop&q=80&w=600',
                badges: ['ВЫГОДНО'],
                rating: 4.8,
                reviews: 204,
                brand: 'Hidea',
                description: 'Самый популярный мотор для "Эгоиста". Вес всего 26 кг, при этом выводит на глиссер двоих.',
                features: ['Вес 26 кг', 'Тихая работа', 'Экономичный'],
                analogs: []
            }
        ];

        // --- UTILS ---
        const formatPrice = (price) => {
            return price.toLocaleString('ru-RU') + ' ₽';
        };

        // --- COMPONENTS ---

        const Button = ({ children, variant = 'primary', className = '', onClick }) => {
            const baseStyle = "px-6 py-3 font-bold uppercase tracking-wider transition-all duration-300 rounded flex items-center justify-center gap-2";
            const variants = {
                primary: "bg-[#FF4500] text-white hover:bg-orange-600 shadow-lg hover:shadow-orange-500/30",
                secondary: "bg-gray-800 text-white hover:bg-gray-700 border border-gray-700",
                outline: "border-2 border-[#FF4500] text-[#FF4500] hover:bg-[#FF4500] hover:text-white"
            };

            return (
                <button onClick={onClick} className={`${baseStyle} ${variants[variant]} ${className}`}>
                    {children}
                </button>
            );
        };

        const Badge = ({ type }) => {
            const styles = {
                'ХИТ': 'bg-red-600 text-white',
                'NEW': 'bg-green-600 text-white',
                'ВЫГОДНО': 'bg-yellow-500 text-black',
                'Убийца брендов': 'bg-purple-600 text-white'
            };
            return (
                <span className={`text-[10px] font-bold px-2 py-1 rounded-sm uppercase tracking-wide absolute top-2 left-2 z-10 ${styles[type] || 'bg-gray-500 text-white'}`}>
                    {type}
                </span>
            );
        };

        // --- QUIZ COMPONENT ---
        const Quiz = ({ onClose }) => {
            const [step, setStep] = useState(0);
            const [history, setHistory] = useState([]);
            const [answers, setAnswers] = useState({});

            const nextStep = (answer, nextBranch) => {
                setAnswers({ ...answers, [step]: answer });
                setHistory([...history, step]);

                if (nextBranch) {
                    setStep(nextBranch);
                } else if (step === 99) {
                    onClose();
                    alert("Заявка отправлена! Менеджер свяжется с вами.");
                } else {
                    setStep(step + 1);
                }
            };

            const questions = {
                0: {
                    question: "Какая стихия вас зовет?",
                    options: [
                        { text: "Грязь, лес, бездорожье", icon: <Mountain />, next: 10 },
                        { text: "Реки, озера, рыбалка", icon: <Anchor />, next: 20 },
                        { text: "Снег и зима", icon: <Snowflake />, next: 30 }
                    ]
                },
                // Ветка А (Земля)
                10: {
                    question: "Для каких целей берете технику?",
                    options: [
                        { text: "Охота, рыбалка, хозяйство", next: 11 },
                        { text: "Драйв и покатушки", next: 11 },
                        { text: "Прогулки с семьей", next: 11 },
                        { text: "Для ребенка", next: 11 }
                    ]
                },
                11: {
                    question: "Какой у вас опыт?",
                    options: [
                        { text: "Новичок (хочу «сел и поехал»)", next: 12 },
                        { text: "Бывалый", next: 12 },
                        { text: "Мастер гаража", next: 12 }
                    ]
                },
                12: {
                    question: "Планируемый бюджет?",
                    options: [
                        { text: "до 200 000 руб.", next: 99 },
                        { text: "до 1 000 000 руб.", next: 99 },
                        { text: "Бюджет не ограничен", next: 99 }
                    ]
                },
                // Ветка Б (Вода)
                20: {
                    question: "Как планируете отдыхать?",
                    options: [
                        { text: "Эгоист (Один)", next: 21 },
                        { text: "Вдвоем с напарником", next: 21 },
                        { text: "Компания / Семья", next: 21 }
                    ]
                },
                21: {
                    question: "Где будете ходить?",
                    options: [
                        { text: "Небольшие реки и озера", next: 22 },
                        { text: "Крупные водохранилища / Море", next: 22 },
                        { text: "Горные реки", next: 22 }
                    ]
                },
                22: {
                    question: "Какая мощность мотора нужна?",
                    options: [
                        { text: "Без регистрации (до 9.9 л.с.)", next: 99 },
                        { text: "Золотая середина (9.9 PRO / 20 л.с.)", next: 99 },
                        { text: "Взрослый мотор (30+ л.с.)", next: 99 }
                    ]
                },
                // Финал
                99: {
                    isForm: true,
                    title: "Отлично! Мы подобрали 3 варианта.",
                    desc: "Куда отправить подборку с ценами и закрепить за вами купон на бесплатное ТО?"
                }
            };

            const currentQ = questions[step];

            return (
                <div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
                    <div className="bg-white text-gray-900 w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden animate-fade-in-up">
                        <div className="bg-[#FF4500] p-4 flex justify-between items-center text-white">
                            <h3 className="font-bold text-lg">Помощник по выбору</h3>
                            <button onClick={onClose}><X /></button>
                        </div>

                        <div className="p-8">
                            {currentQ.isForm ? (
                                <div className="text-center space-y-6">
                                    <h2 className="text-2xl font-bold">{currentQ.title}</h2>
                                    <p className="text-gray-600">{currentQ.desc}</p>
                                    <input type="text" placeholder="+7 (___) ___-__-__" className="w-full p-4 border border-gray-300 rounded text-lg" />
                                    <div className="flex gap-4 flex-col sm:flex-row">
                                        <Button className="w-full bg-green-500 hover:bg-green-600" onClick={() => nextStep(null, null)}>WhatsApp</Button>
                                        <Button className="w-full bg-blue-500 hover:bg-blue-600" onClick={() => nextStep(null, null)}>Telegram</Button>
                                    </div>
                                    <p className="text-xs text-gray-400">Нажимая кнопку, вы соглашаетесь с политикой обработки персональных данных.</p>
                                </div>
                            ) : (
                                <>
                                    <h2 className="text-2xl font-bold mb-8 text-center">{currentQ.question}</h2>
                                    <div className="grid gap-4">
                                        {currentQ.options.map((opt, idx) => (
                                            <button
                                                key={idx}
                                                onClick={() => nextStep(opt.text, opt.next)}
                                                className="p-5 border border-gray-200 rounded-lg hover:border-[#FF4500] hover:bg-orange-50 transition-all flex items-center gap-4 text-left group"
                                            >
                                                {opt.icon && <span className="text-gray-400 group-hover:text-[#FF4500]">{opt.icon}</span>}
                                                <span className="font-medium text-lg">{opt.text}</span>
                                                <ChevronRight className="ml-auto text-gray-300" />
                                            </button>
                                        ))}
                                    </div>
                                    <div className="mt-8 flex justify-between items-center text-sm text-gray-400">
                                        <span>Вопрос {history.length + 1}</span>
                                        <div className="h-1 bg-gray-100 w-32 rounded-full overflow-hidden">
                                            <div className="h-full bg-[#FF4500]" style={{ width: `${((history.length + 1) / 4) * 100}%` }}></div>
                                        </div>
                                    </div>
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- PRODUCT CARD MODAL ---
        const ProductModal = ({ product, onClose, allProducts }) => {
            if (!product) return null;

            return (
                <div className="fixed inset-0 bg-white z-40 overflow-y-auto animate-fade-in">
                    {/* Header for Modal */}
                    <div className="sticky top-0 bg-white/90 backdrop-blur-md border-b border-gray-100 p-4 flex justify-between items-center z-50">
                        <h2 className="text-lg font-bold truncate">{product.name}</h2>
                        <button onClick={onClose} className="p-2 hover:bg-gray-100 rounded-full"><X /></button>
                    </div>

                    <div className="max-w-7xl mx-auto p-4 md:p-8 grid grid-cols-1 md:grid-cols-2 gap-12">
                        {/* Gallery */}
                        <div className="space-y-4">
                            <div className="aspect-square bg-gray-100 rounded-xl overflow-hidden relative">
                                <img src={product.image} alt={product.name} className="w-full h-full object-cover" />
                                <div className="absolute top-4 left-4 flex gap-2">
                                    {product.badges.map(b => <Badge key={b} type={b} />)}
                                </div>
                            </div>
                        </div>

                        {/* Info */}
                        <div className="space-y-8">
                            <div>
                                <div className="flex items-center gap-2 mb-2">
                                    <span className="text-gray-500 text-sm">Артикул: {1000 + product.id}</span>
                                    <div className="flex text-yellow-400 text-sm">
                                        {[...Array(5)].map((_, i) => <Star key={i} size={14} fill={i < Math.floor(product.rating) ? "currentColor" : "none"} />)}
                                        <span className="text-gray-400 ml-1">({product.reviews})</span>
                                    </div>
                                </div>
                                <h1 className="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">{product.name}</h1>
                                <div className="flex items-end gap-4 mb-6">
                                    <span className="text-4xl font-bold text-[#FF4500]">{formatPrice(product.price)}</span>
                                    {product.oldPrice && (
                                        <span className="text-xl text-gray-400 line-through mb-1">{formatPrice(product.oldPrice)}</span>
                                    )}
                                </div>

                                {/* Short Specs */}
                                <div className="bg-gray-50 p-4 rounded-lg mb-6 border border-gray-100">
                                    <span className="font-semibold text-gray-700">Характеристики:</span>
                                    <p className="text-gray-600 mt-1">{product.specs}</p>
                                </div>

                                {/* Actions */}
                                <div className="flex flex-col gap-3">
                                    <Button className="w-full text-lg shadow-xl">Купить сейчас</Button>
                                    <div className="grid grid-cols-2 gap-3">
                                        <Button variant="outline">В кредит</Button>
                                        <Button variant="secondary">Нашли дешевле?</Button>
                                    </div>
                                </div>
                            </div>

                            {/* USP Block */}
                            <div className="border-t border-gray-100 pt-8">
                                <h3 className="font-bold text-xl mb-4">Почему это круто?</h3>
                                <ul className="space-y-3">
                                    {product.features.map((feat, idx) => (
                                        <li key={idx} className="flex items-start gap-3">
                                            <div className="bg-green-100 p-1 rounded-full mt-1">
                                                <Check size={14} className="text-green-600" />
                                            </div>
                                            <span className="text-gray-700">{feat}</span>
                                        </li>
                                    ))}
                                </ul>
                            </div>

                            {/* Trust Block inside card */}
                            <div className="bg-gray-50 rounded-xl p-6 grid grid-cols-1 sm:grid-cols-3 gap-4 text-xs text-gray-600">
                                <div className="text-center">
                                    <Wrench className="mx-auto mb-2 text-gray-400" />
                                    <p>Предпродажная подготовка</p>
                                </div>
                                <div className="text-center">
                                    <ShieldCheck className="mx-auto mb-2 text-gray-400" />
                                    <p>Гарантия дилера</p>
                                </div>
                                <div className="text-center">
                                    <Star className="mx-auto mb-2 text-gray-400" />
                                    <p>Видео запуска</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Analogs Block */}
                    {product.analogs.length > 0 && (
                        <div className="max-w-7xl mx-auto p-4 md:p-8 border-t border-gray-100">
                            <h3 className="text-2xl font-bold mb-6">Аналог по качеству, но дешевле</h3>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                {product.analogs.map(id => {
                                    const analog = allProducts.find(p => p.id === id);
                                    if (!analog) return null;
                                    return (
                                        <div key={analog.id} className="border border-[#FF4500] bg-orange-50 rounded-xl p-4 relative cursor-pointer hover:shadow-lg transition-all" onClick={() => { }}>
                                            <div className="absolute -top-3 left-4 bg-[#FF4500] text-white text-xs font-bold px-3 py-1 rounded">РЕКОМЕНДУЕМ</div>
                                            <div className="flex gap-4 items-center">
                                                <img src={analog.image} className="w-20 h-20 object-cover rounded-lg" />
                                                <div>
                                                    <h4 className="font-bold">{analog.name}</h4>
                                                    <p className="text-[#FF4500] font-bold">{formatPrice(analog.price)}</p>
                                                    <p className="text-xs text-green-700 mt-1">Выгода {formatPrice(product.price - analog.price)}</p>
                                                </div>
                                            </div>
                                        </div>
                                    )
                                })}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [view, setView] = useState('home'); // home, catalog
            const [activeCategory, setActiveCategory] = useState(null);
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [isQuizOpen, setIsQuizOpen] = useState(false);
            const [bundleExtra, setBundleExtra] = useState(false); // For calculator

            // Hero Slider Logic
            const [currentSlide, setCurrentSlide] = useState(0);
            const slides = [
                {
                    title: "НЕ СТАВЬ СЕЗОН НА ПАУЗУ",
                    subtitle: "Гусеничные комплекты и сноубайки.",
                    btn: "Зимний каталог",
                    img: "https://images.unsplash.com/photo-1517062489885-c96766023363?auto=format&fit=crop&q=80&w=1600"
                },
                {
                    title: "ГОТОВЬ САНИ ЛЕТОМ",
                    subtitle: "Лодочные моторы по ценам 2025 года.",
                    btn: "Выбрать мотор",
                    img: "https://images.unsplash.com/photo-1520542354717-3135b376df17?auto=format&fit=crop&q=80&w=1600"
                }
            ];

            useEffect(() => {
                const timer = setInterval(() => {
                    setCurrentSlide((prev) => (prev + 1) % slides.length);
                }, 5000);
                return () => clearInterval(timer);
            }, [slides.length]);

            return (
                <div className="font-sans text-gray-900 bg-white min-h-screen selection:bg-[#FF4500] selection:text-white">

                    {/* --- HEADER --- */}
                    <header className="sticky top-0 bg-white/95 backdrop-blur-md z-40 border-b border-gray-100">
                        <div className="max-w-7xl mx-auto px-4 h-16 md:h-20 flex items-center justify-between gap-4">

                            {/* Logo & Burger */}
                            <div className="flex items-center gap-4">
                                <button className="md:hidden p-2"><Menu /></button>
                                <div className="flex flex-col cursor-pointer" onClick={() => setView('home')}>
                                    <span className="text-2xl font-black italic tracking-tighter uppercase">Techno<span className="text-[#FF4500]">Drive</span></span>
                                    <span className="text-[10px] text-gray-400 tracking-widest hidden sm:block">EST. 2026</span>
                                </div>
                            </div>

                            {/* Search (Desktop) */}
                            <div className="hidden md:flex flex-1 max-w-lg mx-8 relative">
                                <input
                                    type="text"
                                    placeholder="Найти квадроцикл, мотор, запчасть..."
                                    className="w-full bg-gray-100 border-none rounded-full py-3 px-12 text-sm focus:ring-2 focus:ring-[#FF4500] focus:bg-white transition-all"
                                />
                                <div className="absolute left-4 top-3 text-gray-400"><Search size={18} /></div>
                            </div>

                            {/* Contacts & Actions */}
                            <div className="flex items-center gap-4 md:gap-8">
                                <div className="hidden md:flex flex-col items-end">
                                    <a href="tel:88000000000" className="font-bold text-lg leading-none">8 800 555-35-35</a>
                                    <span className="text-xs text-[#FF4500] font-medium cursor-pointer border-b border-dashed border-[#FF4500]">Заказать видеозвонок</span>
                                </div>
                                <div className="relative">
                                    <div className="text-gray-800"><ShoppingCart /></div>
                                    <span className="absolute -top-2 -right-2 bg-[#FF4500] text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold">2</span>
                                </div>
                            </div>
                        </div>

                        {/* Mobile Search */}
                        <div className="md:hidden px-4 pb-3">
                            <div className="relative">
                                <input type="text" placeholder="Поиск..." className="w-full bg-gray-100 rounded-lg py-2 pl-10 text-sm" />
                                <div className="absolute left-3 top-2.5 text-gray-400"><Search size={16} /></div>
                            </div>
                        </div>
                    </header>

                    {view === 'home' && (
                        <main>
                            {/* --- HERO SECTION --- */}
                            <section className="relative h-[500px] md:h-[600px] overflow-hidden bg-gray-900 text-white">
                                <div className="absolute inset-0 bg-black/40 z-10"></div>
                                <img src={slides[currentSlide].img} className="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 scale-105" alt="Hero" />

                                <div className="relative z-20 max-w-7xl mx-auto px-4 h-full flex flex-col justify-center items-start">
                                    <div className="animate-fade-in-up space-y-6 max-w-2xl">
                                        <h1 className="text-4xl md:text-6xl font-black leading-tight uppercase italic">{slides[currentSlide].title}</h1>
                                        <p className="text-lg md:text-2xl text-gray-200 font-light">{slides[currentSlide].subtitle}</p>
                                        <Button onClick={() => setView('catalog')}>{slides[currentSlide].btn}</Button>
                                    </div>
                                </div>

                                {/* Slide Indicators */}
                                <div className="absolute bottom-8 left-0 right-0 z-20 flex justify-center gap-2">
                                    {slides.map((_, i) => (
                                        <div key={i} className={`h-1 rounded-full transition-all duration-300 ${i === currentSlide ? 'w-8 bg-[#FF4500]' : 'w-2 bg-white/50'}`} />
                                    ))}
                                </div>
                            </section>

                            {/* --- CATEGORY TILES (Designed for Self-Selection) --- */}
                            <section className="py-16 max-w-7xl mx-auto px-4">
                                <h2 className="text-3xl font-bold mb-10 text-center uppercase tracking-tight">Под что ищем технику?</h2>
                                <div className="grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4">
                                    {[
                                        { title: "В Грязь и Лес", sub: "ATV & Buggy", img: "https://images.unsplash.com/photo-1534065963283-93d399996d93?auto=format&fit=crop&q=80&w=400" },
                                        { title: "На Большую Воду", sub: "Лодки & Моторы", img: "https://images.unsplash.com/photo-1544259508-e877478d10b8?auto=format&fit=crop&q=80&w=400" },
                                        { title: "Драйв и Спорт", sub: "Enduro & Pit", img: "https://images.unsplash.com/photo-1558980394-4c7c9299fe96?auto=format&fit=crop&q=80&w=400" },
                                        { title: "Детям", sub: "Безопасные 125cc", img: "https://images.unsplash.com/photo-1616788421877-331c1cd79a1f?auto=format&fit=crop&q=80&w=400" },
                                        { title: "Охота и Работа", sub: "Утилитарные", img: "https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?auto=format&fit=crop&q=80&w=400" },
                                        { title: "Зимний Фрирайд", sub: "Сноубайки", img: "https://images.unsplash.com/photo-1517062489885-c96766023363?auto=format&fit=crop&q=80&w=400" }
                                    ].map((cat, i) => (
                                        <div key={i} className="group relative aspect-[4/3] overflow-hidden rounded-xl cursor-pointer" onClick={() => setView('catalog')}>
                                            <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent z-10"></div>
                                            <img src={cat.img} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" />
                                            <div className="absolute bottom-4 left-4 z-20">
                                                <h3 className="text-white font-bold text-lg md:text-xl uppercase leading-none">{cat.title}</h3>
                                                <p className="text-gray-300 text-xs mt-1">{cat.sub}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </section>

                            {/* --- HIT PRODUCTS --- */}
                            <section className="bg-gray-50 py-16">
                                <div className="max-w-7xl mx-auto px-4">
                                    <div className="flex justify-between items-end mb-10">
                                        <h2 className="text-3xl font-bold uppercase tracking-tight">Хиты Продаж</h2>
                                        <a onClick={() => setView('catalog')} className="text-[#FF4500] font-bold cursor-pointer hover:underline">Весь каталог</a>
                                    </div>

                                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                                        {PRODUCTS.map((product) => (
                                            <div key={product.id} className="bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 group cursor-pointer" onClick={() => setSelectedProduct(product)}>
                                                <div className="relative aspect-square overflow-hidden rounded-t-xl bg-gray-100">
                                                    <div className="absolute top-2 left-2 flex gap-1 z-10">
                                                        {product.badges.map(b => <Badge key={b} type={b} />)}
                                                    </div>
                                                    <img src={product.image} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
                                                </div>
                                                <div className="p-4">
                                                    <h3 className="font-bold text-gray-900 mb-1 truncate">{product.name}</h3>
                                                    <p className="text-xs text-gray-500 mb-3">{product.specs}</p>
                                                    <div className="flex justify-between items-center">
                                                        <div>
                                                            <p className="font-bold text-xl">{formatPrice(product.price)}</p>
                                                            {product.oldPrice && <p className="text-xs text-gray-400 line-through">{formatPrice(product.oldPrice)}</p>}
                                                        </div>
                                                        <button className="bg-gray-100 p-2 rounded-full hover:bg-[#FF4500] hover:text-white transition-colors">
                                                            <ShoppingCart size={18} />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </section>

                            {/* --- QUIZ TEASER --- */}
                            <section className="bg-[#1a1a1a] text-white py-16 relative overflow-hidden">
                                <div className="absolute top-0 right-0 w-1/2 h-full bg-[#FF4500] skew-x-12 translate-x-1/3 opacity-10"></div>
                                <div className="max-w-4xl mx-auto px-4 text-center relative z-10">
                                    <h2 className="text-3xl md:text-4xl font-bold mb-4">ТЕРЯЕТЕСЬ В ХАРАКТЕРИСТИКАХ?</h2>
                                    <p className="text-gray-400 mb-8 text-lg">Ответьте на 4 вопроса, и мы подберем 3 идеальных варианта под ваш бюджет + подарим скидку на масло.</p>
                                    <Button onClick={() => setIsQuizOpen(true)} className="mx-auto text-lg px-10 py-4 shadow-[0_0_20px_rgba(255,69,0,0.4)]">
                                        Подобрать технику за 1 минуту
                                    </Button>
                                </div>
                            </section>

                            {/* --- BUNDLE CALCULATOR (Interactive) --- */}
                            <section className="py-16 max-w-7xl mx-auto px-4">
                                <h2 className="text-3xl font-bold mb-10 uppercase text-center">Собери свой комплект</h2>
                                <div className="bg-white border border-gray-200 rounded-2xl p-6 md:p-10 shadow-lg flex flex-col md:flex-row gap-10 items-center">
                                    <div className="w-full md:w-1/2 relative">
                                        <img src="https://images.unsplash.com/photo-1544259508-e877478d10b8?auto=format&fit=crop&q=80&w=800" className="rounded-xl shadow-md" />
                                        {bundleExtra && (
                                            <div className="absolute -bottom-4 -right-4 bg-white p-2 rounded-lg shadow-lg border border-gray-100 animate-bounce">
                                                <img src="https://images.unsplash.com/photo-1621517032777-66b96b345681?auto=format&fit=crop&q=80&w=200" className="w-20 h-20 object-cover rounded" />
                                            </div>
                                        )}
                                    </div>
                                    <div className="w-full md:w-1/2 space-y-6">
                                        <div className="space-y-4">
                                            <div className="flex justify-between items-center p-4 bg-gray-50 rounded-lg border border-gray-200">
                                                <div>
                                                    <h4 className="font-bold">Лодка Roger Zefir 350</h4>
                                                    <p className="text-sm text-gray-500">НДНД, 350 см</p>
                                                </div>
                                                <span className="font-bold">48 000 ₽</span>
                                            </div>
                                            <div className={`flex justify-between items-center p-4 rounded-lg border cursor-pointer transition-all ${bundleExtra ? 'bg-orange-50 border-[#FF4500]' : 'bg-white border-gray-200 hover:border-gray-400'}`} onClick={() => setBundleExtra(!bundleExtra)}>
                                                <div className="flex items-center gap-3">
                                                    <div className={`w-5 h-5 rounded border flex items-center justify-center ${bundleExtra ? 'bg-[#FF4500] border-[#FF4500]' : 'border-gray-300'}`}>
                                                        {bundleExtra && <Check size={12} className="text-white" />}
                                                    </div>
                                                    <div>
                                                        <h4 className="font-bold">Мотор Hidea 9.8</h4>
                                                        <p className="text-sm text-gray-500">Добавить мощность</p>
                                                    </div>
                                                </div>
                                                <span className="font-bold">98 000 ₽</span>
                                            </div>
                                        </div>

                                        <div className="pt-6 border-t border-gray-100">
                                            <div className="flex justify-between items-center mb-4">
                                                <span className="text-gray-500">Итого за комплект:</span>
                                                <span className="text-3xl font-bold text-gray-900">{formatPrice(48000 + (bundleExtra ? 98000 : 0))}</span>
                                            </div>
                                            {bundleExtra && (
                                                <div className="text-green-600 text-sm font-bold mb-4 flex items-center gap-2">
                                                    <Check size={16} />
                                                    Бонус: Масло + Жилет в подарок!
                                                </div>
                                            )}
                                            <Button className="w-full">Купить комплектом</Button>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* --- TRUST BLOCK --- */}
                            <section className="bg-gray-100 py-16 border-t border-gray-200">
                                <div className="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
                                    <div className="text-center md:text-left">
                                        <div className="bg-white w-16 h-16 rounded-full flex items-center justify-center shadow-sm mb-4 mx-auto md:mx-0">
                                            <Star className="text-[#FF4500]" size={32} />
                                        </div>
                                        <h3 className="font-bold text-lg mb-2">Отбираем лучшее</h3>
                                        <p className="text-gray-600 text-sm">В каталоге только бренды с реальными запчастями в РФ (Kayo, Parsun).</p>
                                    </div>
                                    <div className="text-center md:text-left">
                                        <div className="bg-white w-16 h-16 rounded-full flex items-center justify-center shadow-sm mb-4 mx-auto md:mx-0">
                                            <Wrench className="text-[#FF4500]" size={32} />
                                        </div>
                                        <h3 className="font-bold text-lg mb-2">Честная предпродажка</h3>
                                        <p className="text-gray-600 text-sm">Протяжка узлов, замена масла и настройка карбюратора ДО продажи.</p>
                                    </div>
                                    <div className="text-center md:text-left">
                                        <div className="bg-white w-16 h-16 rounded-full flex items-center justify-center shadow-sm mb-4 mx-auto md:mx-0">
                                            <ShieldCheck className="text-[#FF4500]" size={32} />
                                        </div>
                                        <h3 className="font-bold text-lg mb-2">Гарантия не на словах</h3>
                                        <p className="text-gray-600 text-sm">Свой сервисный центр. Не отправляем в Китай, чиним сами.</p>
                                    </div>
                                </div>
                            </section>
                        </main>
                    )}

                    {/* --- CATALOG VIEW (Simple Implementation) --- */}
                    {view === 'catalog' && (
                        <div className="max-w-7xl mx-auto px-4 py-8 flex flex-col md:flex-row gap-8 animate-fade-in">
                            {/* Sidebar Filter */}
                            <aside className="w-full md:w-64 flex-shrink-0 hidden md:block">
                                <div className="bg-white p-4 rounded-xl border border-gray-200 shadow-sm sticky top-24">
                                    <h3 className="font-bold mb-4 uppercase">Фильтры</h3>

                                    <div className="space-y-6">
                                        <div>
                                            <h4 className="font-semibold mb-2 text-sm text-gray-500">Цена</h4>
                                            <div className="flex gap-2">
                                                <input type="text" placeholder="От" className="w-full bg-gray-100 p-2 rounded text-sm" />
                                                <input type="text" placeholder="До" className="w-full bg-gray-100 p-2 rounded text-sm" />
                                            </div>
                                        </div>
                                        <div>
                                            <h4 className="font-semibold mb-2 text-sm text-gray-500">Категория</h4>
                                            <div className="space-y-2">
                                                {['Квадроциклы', 'Моторы', 'Лодки', 'Сноубайки'].map(c => (
                                                    <label key={c} className="flex items-center gap-2 cursor-pointer">
                                                        <input type="checkbox" className="rounded text-[#FF4500] focus:ring-[#FF4500]" />
                                                        <span className="text-sm">{c}</span>
                                                    </label>
                                                ))}
                                            </div>
                                        </div>
                                        <Button variant="outline" className="w-full text-sm py-2">Сбросить</Button>
                                    </div>
                                </div>
                            </aside>

                            {/* Product Grid */}
                            <div className="flex-1">
                                <div className="flex items-center gap-2 mb-6 text-sm text-gray-500">
                                    <span className="cursor-pointer hover:text-black" onClick={() => setView('home')}>Главная</span>
                                    <ChevronRight size={14} />
                                    <span className="text-black font-bold">Каталог</span>
                                </div>
                                <h1 className="text-3xl font-bold mb-6">Вся техника</h1>

                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {PRODUCTS.map((product) => (
                                        <div key={product.id} className="bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 group cursor-pointer" onClick={() => setSelectedProduct(product)}>
                                            <div className="relative aspect-square overflow-hidden rounded-t-xl bg-gray-100">
                                                <div className="absolute top-2 left-2 flex gap-1 z-10">
                                                    {product.badges.map(b => <Badge key={b} type={b} />)}
                                                </div>
                                                <img src={product.image} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
                                            </div>
                                            <div className="p-4">
                                                <h3 className="font-bold text-gray-900 mb-1 truncate">{product.name}</h3>
                                                <div className="flex justify-between items-end mt-4">
                                                    <p className="font-bold text-xl">{formatPrice(product.price)}</p>
                                                    <Button className="py-1 px-3 text-xs">Купить</Button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* --- FOOTER --- */}
                    <footer className="bg-gray-900 text-gray-400 py-12">
                        <div className="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8 text-sm">
                            <div>
                                <span className="text-2xl font-black italic text-white uppercase block mb-4">Techno<span className="text-[#FF4500]">Drive</span></span>
                                <p>Магазин техники для тех, кто понимает разницу между ценой и ценностью.</p>
                            </div>
                            <div>
                                <h4 className="text-white font-bold mb-4 uppercase">Каталог</h4>
                                <ul className="space-y-2">
                                    <li><a href="#" className="hover:text-[#FF4500]">На земле</a></li>
                                    <li><a href="#" className="hover:text-[#FF4500]">На воде</a></li>
                                    <li><a href="#" className="hover:text-[#FF4500]">Зима</a></li>
                                    <li><a href="#" className="hover:text-[#FF4500]">Запчасти</a></li>
                                </ul>
                            </div>
                            <div>
                                <h4 className="text-white font-bold mb-4 uppercase">Клиентам</h4>
                                <ul className="space-y-2">
                                    <li><a href="#" className="hover:text-[#FF4500]">Кредит и Рассрочка</a></li>
                                    <li><a href="#" className="hover:text-[#FF4500]">Доставка и Оплата</a></li>
                                    <li><a href="#" className="hover:text-[#FF4500]">Гарантия</a></li>
                                    <li><a href="#" className="hover:text-[#FF4500]">Контакты</a></li>
                                </ul>
                            </div>
                            <div>
                                <h4 className="text-white font-bold mb-4 uppercase">Контакты</h4>
                                <p className="text-white text-lg font-bold mb-2">8 800 555-35-35</p>
                                <p className="mb-4">Ежедневно с 9:00 до 21:00</p>
                                <div className="flex gap-4">
                                    <div className="w-10 h-10 bg-gray-800 rounded flex items-center justify-center hover:bg-[#FF4500] text-white cursor-pointer transition-colors">VK</div>
                                    <div className="w-10 h-10 bg-gray-800 rounded flex items-center justify-center hover:bg-blue-500 text-white cursor-pointer transition-colors">TG</div>
                                </div>
                            </div>
                        </div>
                    </footer>

                    {/* --- MODALS --- */}
                    {selectedProduct && <ProductModal product={selectedProduct} allProducts={PRODUCTS} onClose={() => setSelectedProduct(null)} />}
                    {isQuizOpen && <Quiz onClose={() => setIsQuizOpen(false)} />}

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
